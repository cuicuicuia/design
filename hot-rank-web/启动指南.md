# é¡¹ç›®å¯åŠ¨æŒ‡å—

## ğŸ“‹ å‰ç½®å‡†å¤‡

### 1. æ£€æŸ¥æ˜¯å¦å·²å®‰è£…
- âœ… Python 3.10+ ï¼ˆè¿è¡Œ `python --version` æ£€æŸ¥ï¼‰
- âœ… pnpm ï¼ˆè¿è¡Œ `pnpm --version` æ£€æŸ¥ï¼Œæ²¡æœ‰çš„è¯ï¼š`npm i -g pnpm`ï¼‰
- âœ… Docker Desktopï¼ˆå¯é€‰ï¼Œç”¨äºå¯åŠ¨ Redis å’Œ PostgreSQLï¼‰

---

## ğŸš€ å¯åŠ¨æ­¥éª¤

### æ­¥éª¤ 1ï¼šå¯åŠ¨ Redisï¼ˆå¦‚æœæ²¡æœ‰ Redisï¼‰

**æ–¹å¼ Aï¼šä½¿ç”¨ Dockerï¼ˆæ¨èï¼‰**
```powershell
docker run -d --name hotrank-redis -p 6379:6379 redis:7
```

**æ–¹å¼ Bï¼šå¦‚æœä½ å·²ç»æœ‰ Redis åœ¨è¿è¡Œï¼Œè·³è¿‡è¿™æ­¥**

---

### æ­¥éª¤ 2ï¼šå¯åŠ¨ PostgreSQLï¼ˆå¦‚æœæ²¡æœ‰ PostgreSQLï¼‰

**æ–¹å¼ Aï¼šä½¿ç”¨ Dockerï¼ˆæ¨èï¼‰**
```powershell
docker run -d --name hotrank-pg -e POSTGRES_USER=admin -e POSTGRES_PASSWORD=123456 -e POSTGRES_DB=postgres -p 5432:5432 postgres:16
```

**æ–¹å¼ Bï¼šå¦‚æœä½ å·²ç»æœ‰ PostgreSQLï¼Œç¡®ä¿é…ç½®å’Œ `config.py` ä¸­çš„ä¸€è‡´**

---

### æ­¥éª¤ 3ï¼šåˆå§‹åŒ–æ•°æ®åº“ï¼ˆå¦‚æœæ˜¯æ™®é€šå®‰è£…çš„PostgreSQLï¼‰

**âš ï¸ é‡è¦ï¼šå¦‚æœä½¿ç”¨Dockerå¯åŠ¨PostgreSQLï¼Œå¯ä»¥è·³è¿‡æ­¤æ­¥éª¤**

å¦‚æœæ˜¯æ™®é€šå®‰è£…çš„PostgreSQLï¼Œéœ€è¦å…ˆåˆ›å»ºæ•°æ®åº“ï¼š

```powershell
# è¿›å…¥åç«¯ç›®å½•
cd "C:\Users\ClamSeas\Desktop\design\hot-rank-web"

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
.\.venv\Scripts\Activate.ps1

# è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
python tools\init_database.py
```

**çœ‹åˆ° "âœ“ æ•°æ®åº“åˆå§‹åŒ–å®Œæˆï¼" å°±è¯´æ˜æˆåŠŸäº†ã€‚**

---

### æ­¥éª¤ 4ï¼šåˆå§‹åŒ– Redis æ•°æ®ï¼ˆé‡è¦ï¼ï¼‰

åœ¨å¯åŠ¨åç«¯ä¹‹å‰ï¼Œéœ€è¦å…ˆåˆå§‹åŒ– Redis ä¸­çš„ `card_table`ï¼š

```powershell
# è¿›å…¥åç«¯ç›®å½•
cd "C:\Users\ClamSeas\Desktop\design\hot-rank-web"

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
.\.venv\Scripts\Activate.ps1

# åˆå§‹åŒ– Redis æ•°æ®
python tools\pushSomethings.py
```

**çœ‹åˆ°ç±»ä¼¼è¾“å‡ºå°±è¯´æ˜æˆåŠŸäº†ï¼š**ï¼ˆé€šå¸¸æ²¡æœ‰é”™è¯¯è¾“å‡ºå°±æ˜¯æˆåŠŸï¼‰

**âš ï¸ è¿™ä¸€æ­¥å¾ˆé‡è¦ï¼å¦‚æœä¸åˆå§‹åŒ–ï¼Œåç«¯ä¼šæŠ¥ 500 é”™è¯¯ã€‚**

---

### æ­¥éª¤ 5ï¼šå¯åŠ¨åç«¯ï¼ˆFastAPIï¼‰

æ‰“å¼€ **ç¬¬ä¸€ä¸ª PowerShell çª—å£**ï¼Œæ‰§è¡Œï¼š

```powershell
# è¿›å…¥åç«¯ç›®å½•
cd "C:\Users\ClamSeas\Desktop\design\hot-rank-web"

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
python -m venv .venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
.\.venv\Scripts\Activate.ps1

# å‡çº§ pip
python -m pip install --upgrade pip

# å®‰è£…ä¾èµ–ï¼ˆä½¿ç”¨ UTF-8 ç‰ˆæœ¬ï¼‰
pip install -r requirements-utf8.txt

# å¯åŠ¨åç«¯æœåŠ¡
python app.py
```

**çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºå°±è¯´æ˜åç«¯å¯åŠ¨æˆåŠŸäº†ï¼š**
```
INFO:     Started server process [xxxx]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000
```

**åç«¯åœ°å€ï¼š**
- API æ¥å£ï¼šhttp://127.0.0.1:8000
- API æ–‡æ¡£ï¼šhttp://127.0.0.1:8000/docs

**âš ï¸ ä¿æŒè¿™ä¸ªçª—å£æ‰“å¼€ï¼Œä¸è¦å…³é—­ï¼**

---

### æ­¥éª¤ 6ï¼šå¯åŠ¨å‰ç«¯ï¼ˆVueï¼‰

æ‰“å¼€ **ç¬¬äºŒä¸ª PowerShell çª—å£**ï¼Œæ‰§è¡Œï¼š

```powershell
# è¿›å…¥å‰ç«¯ç›®å½•
cd "C:\Users\ClamSeas\Desktop\design\hot-rank-web\vue-ui"

# å®‰è£…ä¾èµ–ï¼ˆç¬¬ä¸€æ¬¡è¿è¡Œéœ€è¦ï¼‰
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm run dev
```

**çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºå°±è¯´æ˜å‰ç«¯å¯åŠ¨æˆåŠŸäº†ï¼š**
```
  VITE v7.x.x  ready in xxx ms

  âœ  Local:   http://localhost:5173/
  âœ  Network: use --host to expose
```

**å‰ç«¯åœ°å€ï¼š** http://localhost:5173

**âš ï¸ ä¿æŒè¿™ä¸ªçª—å£æ‰“å¼€ï¼Œä¸è¦å…³é—­ï¼**

---

## âœ… éªŒè¯å¯åŠ¨æˆåŠŸ

1. **åç«¯**ï¼šæµè§ˆå™¨æ‰“å¼€ http://127.0.0.1:8000/docsï¼Œåº”è¯¥èƒ½çœ‹åˆ° FastAPI çš„ API æ–‡æ¡£é¡µé¢
2. **å‰ç«¯**ï¼šæµè§ˆå™¨æ‰“å¼€ http://localhost:5173ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ä½ çš„å‰ç«¯é¡µé¢

---

## ğŸ›‘ åœæ­¢æœåŠ¡

- **åœæ­¢åç«¯**ï¼šåœ¨ç¬¬ä¸€ä¸ª PowerShell çª—å£æŒ‰ `Ctrl + C`
- **åœæ­¢å‰ç«¯**ï¼šåœ¨ç¬¬äºŒä¸ª PowerShell çª—å£æŒ‰ `Ctrl + C`
- **åœæ­¢ Docker å®¹å™¨**ï¼ˆå¦‚æœç”¨äº†ï¼‰ï¼š
  ```powershell
  docker stop hotrank-redis hotrank-pg
  docker rm hotrank-redis hotrank-pg
  ```

---

## â— å¸¸è§é—®é¢˜

### é—®é¢˜ 1ï¼š`pip install` æŠ¥é”™ "Invalid requirement"
**è§£å†³**ï¼šç¡®ä¿ä½¿ç”¨ `requirements-utf8.txt`ï¼Œä¸è¦ç”¨ `requirements.txt`

### é—®é¢˜ 2ï¼šåç«¯å¯åŠ¨æŠ¥é”™ "Connection refused" æˆ– "æ— æ³•è¿æ¥åˆ° PostgreSQL"
**è§£å†³**ï¼š
- **å¦‚æœæ˜¯æ™®é€šå®‰è£…çš„PostgreSQLï¼ˆéDockerï¼‰**ï¼š
  1. è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼š
     ```powershell
     cd "C:\Users\ClamSeas\Desktop\design\hot-rank-web"
     .\.venv\Scripts\Activate.ps1
     python tools\init_database.py
     ```
  2. æˆ–è€…æ‰‹åŠ¨åˆ›å»ºæ•°æ®åº“ï¼š
     ```powershell
     # ä½¿ç”¨psqlå‘½ä»¤è¡Œå·¥å…·
     psql -U postgres -h localhost
     # ç„¶åæ‰§è¡Œï¼š
     CREATE DATABASE hotrank;
     \q
     ```
- **å¦‚æœä½¿ç”¨Docker**ï¼š
  - æ£€æŸ¥ PostgreSQL æ˜¯å¦åœ¨è¿è¡Œï¼š`docker ps` æŸ¥çœ‹ `hotrank-pg` å®¹å™¨
- æ£€æŸ¥ `config.py` ä¸­çš„ `PG_HOST`ã€`PG_PORT`ã€`PG_USER`ã€`PG_PASSWORD`ã€`PG_DB` æ˜¯å¦æ­£ç¡®

### é—®é¢˜ 3ï¼šåç«¯å¯åŠ¨æŠ¥é”™ "Connection refused" æˆ– "æ— æ³•è¿æ¥åˆ° Redis"
**è§£å†³**ï¼š
- æ£€æŸ¥ Redis æ˜¯å¦åœ¨è¿è¡Œï¼š`docker ps` æŸ¥çœ‹ `hotrank-redis` å®¹å™¨
- æ£€æŸ¥ `config.py` ä¸­çš„ `REDIS_HOST`ã€`REDIS_PORT` æ˜¯å¦æ­£ç¡®

### é—®é¢˜ 4ï¼šå‰ç«¯å¯åŠ¨æŠ¥é”™ "Cannot find module"
**è§£å†³**ï¼šç¡®ä¿åœ¨ `vue-ui` ç›®å½•ä¸‹è¿è¡Œäº† `pnpm install`

### é—®é¢˜ 5ï¼šåç«¯æŠ¥é”™ 500 "card_table not initialized in Redis"
**è§£å†³**ï¼š
- è¿™æ˜¯ Redis æ•°æ®æœªåˆå§‹åŒ–å¯¼è‡´çš„
- è¿è¡Œåˆå§‹åŒ–è„šæœ¬ï¼š
  ```powershell
  cd "C:\Users\ClamSeas\Desktop\design\hot-rank-web"
  .\.venv\Scripts\Activate.ps1
  python tools\pushSomethings.py
  ```
- ç„¶åé‡å¯åç«¯æœåŠ¡

### é—®é¢˜ 6ï¼šå‰ç«¯é¡µé¢æ˜¾ç¤º "æ— æ³•è¿æ¥åˆ°åç«¯"
**è§£å†³**ï¼š
- ç¡®è®¤åç«¯å·²å¯åŠ¨ï¼ˆæ£€æŸ¥ç¬¬ä¸€ä¸ª PowerShell çª—å£ï¼‰
- ç¡®è®¤åç«¯åœ°å€æ˜¯ http://127.0.0.1:8000
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰çš„é”™è¯¯ä¿¡æ¯

---

## ğŸ“ é…ç½®æ–‡ä»¶è¯´æ˜

é…ç½®æ–‡ä»¶ä½ç½®ï¼š`C:\Users\ClamSeas\Desktop\æ¯•è®¾\hot-rank-web\config.py`

**é‡è¦é…ç½®é¡¹ï¼š**
- `PG_HOST`ã€`PG_PORT`ã€`PG_USER`ã€`PG_PASSWORD`ã€`PG_DB`ï¼šPostgreSQL è¿æ¥ä¿¡æ¯
- `REDIS_HOST`ã€`REDIS_PORT`ã€`REDIS_PASSWORD`ï¼šRedis è¿æ¥ä¿¡æ¯ï¼ˆå¦‚æœ Redis æ²¡æœ‰å¯†ç ï¼Œ`REDIS_PASSWORD = None`ï¼‰

---

ç¥ä½ å¯åŠ¨é¡ºåˆ©ï¼ğŸ‰
